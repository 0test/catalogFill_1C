Модуль Синхронизации MODX Evolution + Shopkeeper c системой 1С

Описание:
За основу взят модуль импорта/экспорта товаров <a href="http://www.modx-shopkeeper.ru/documentation/modx-evolution/catalogfill.html">catalogFiil</a>", входящий в состав модуля Shopkeeper, к которому "прикручен" дополнительный функционал.

Добавленные возможности:
- в модуле добавлена новая вкладка "Настройки синхронизации с 1С", в которой можно сохранить след. настройки:
-- адрес ссылки, по которой будет работать cron
-- выбор файла конфигурации
-- указание ID раздела каталога для импорта

Ограничения:
- для импорта возможно использовать только файл в формате .csv
- для запуска импорта (синхронизации) можно использовать только веб-ссылку (указанную в настройках модуля)

Принцип синхронизации с 1С:
1. Программист 1С должен настроить цикличную (допустим каждый день в 8 утра) выгрузку товаров в файл формата .CSV через FTP на сервер сайта в каталог: "/корень_сайта/assets/modules/catalogFill_1C/import/"
2. С помощью панели управления хостингом (или другими способами) необходимо настроить CronTab (планировщик заданий) который должен проходить по веб-ссылке, адрес которой вы указывается в модуле.
3. Пройдя по ссылке, он запустит скрипт импорта товаров в базу сайта.

Установка модуля:
1. Скачайте модуль
2. Залейте скаченную папку "assets" в корень сайта. Если зальете в другую папку, то нужно будет менять пути в конфиг. файлах.
3. В админке MODX, можно либо создать новый модуль, либо обновить существующий.
3.1. Создаем новый: идем в "Модули" -> "Управление модулями" -> "Новый модуль"
    - название: Синхронизация с 1С
    - код модуля: require MODX_BASE_PATH."assets/modules/catalogFill_1С/catalog_fill_1С.inc.php";
    Нажимаем кнопку "Сохранить" и жмем F5.
  

3.2. Обновляем существующий модуль: идем в "Модули" -> "Управление модулями" -> кликаем по шестеренкам напротив "Импорт/экспорт товаров" -> "Редактировать"
   - код модуля меняем на require MODX_BASE_PATH."assets/modules/catalogFill_1С/catalog_fill_1С.inc.php";
   - сохраняем.

4. Создаем новый плагин. Идем в "Элементы" -> "Управление элементами" -> "Плагины" -> "Новый плагин"
  - название: 1С_sync_startPage
  - код плагина: include MODX_BASE_PATH."assets/modules/catalogFill_1C/1С_sync_startPage.inc.php";
  - В вкладке "События плагина", необходимо поставить галочку напротив: "OnPageNotFound"
  - сохраните плагин. (данный плагин отслеживает адрес ссылки по которой открыли сайт и сравнивает её с сылкой сохрн. в модуле, если они совпадают - запустится импорт.)

Установка закончена.

  
Настройки модуля:
1. Открываем новосозданный (или обнововленный модуль).
2. Переходим во вкладку "Настройки синхронизации с 1С"
3. В поле "Адрес ссылки" вводим любую ссылку, начиная от корня сайта.
  - например: /import/start.php
  - получится, что ссылка для запуска будет иметь след. вид: http://site.ru/import/start.php
4. Выберите файл конфигурации (подробнее о настройке этого файла - см. ниже)
5. В поле "ID раздела каталога" укажите номер ID раздела каталога в который будет осуществлятся импорт
6. Сохраните настройки.


Настройка файла конфигурации - подробное руководство данного файла, написанно на сайте разработчика модуля - <a href="http://www.modx-shopkeeper.ru/documentation/modx-evolution/catalogfill.html" target="_blank">ссылка</a>.
Так же, в архиве имеется тестовый файл конфигурации.

Если вам необходима помощь в настройке синхронизации с 1С - стучитесь в ВК - vk.com/tanzirev
Стоимость настройки, зависит от сложности каталога и импортируемого файла.
